@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;

  /* Layout chrome */
  --page-max-width: 1120px;          /* default content width */
  --page-max-width-wide: 1320px;     /* areas that should breathe a little more */
  --page-gutter: clamp(1.25rem, 5vw, 3.5rem);
  --page-gutter-wide: clamp(1.25rem, 6vw, 4.5rem);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);

}

/* Consistent horizontal rhythm for page chrome */
.site-shell {
  width: min(100%, var(--page-max-width));
  margin-inline: auto;
  padding-inline: var(--page-gutter);
}

.site-shell--wide {
  width: min(100%, var(--page-max-width-wide));
  margin-inline: auto;
  padding-inline: var(--page-gutter-wide);
}

.site-shell--tight {
  width: min(100%, var(--page-max-width));
  margin-inline: auto;
  padding-inline: clamp(1rem, 4vw, 2.75rem);
}

/* Make autofilled inputs match our dark style */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
textarea:-webkit-autofill,
select:-webkit-autofill {
  -webkit-text-fill-color: #ffffff !important;
  -webkit-box-shadow: 0 0 0px 1000px #000 inset !important;
  box-shadow: 0 0 0px 1000px #000 inset !important;
  caret-color: #ffffff !important;
  transition: background-color 9999s ease-in-out 0s;
}

/* ------------------------------------------------------------------ */
/* Reader typography (.wysiwyg)                                        */
/* ------------------------------------------------------------------ */

.wysiwyg {
  /* Slightly larger than 16px for easier reading; more generous line-height */
  font-size: 1.0625rem; /* 17px */
  line-height: 1.8;
}

/* Tighter control on very long lines (feels closer to Pages layout) */
.wysiwyg.wysiwyg-reader {
  max-width: 72ch;
}

/* Headings */
.wysiwyg h1,
.wysiwyg h2,
.wysiwyg h3,
.wysiwyg h4 {
  font-weight: 700;
  line-height: 1.25;
  margin: 1.75em 0 0.7em;
}
.wysiwyg h1 { font-size: 2rem; }
.wysiwyg h2 {
  font-size: 1.5rem;
  padding-bottom: .5rem;
  border-bottom: 1px solid color-mix(in oklab, currentColor 20%, transparent);
  display: flow-root;   /* keeps the divider from being clipped by floats */
  clear: both;          /* guarantees it starts below any prior .floatad */
}
.wysiwyg h3 { font-size: 1.25rem; }
.wysiwyg h4 { font-size: 1.1rem; }

/* Paragraphs & spacing */
.wysiwyg p { margin: 1em 0; }

/* A little lighter than default bold to match Pages feel */
.wysiwyg b,
.wysiwyg strong {
  font-weight: 600;
}

.wysiwyg hr {
  border: 0;
  height: 0;
  border-top: 1px solid color-mix(in oklab, currentColor 20%, transparent);
  margin: 1.75em 0;
  clear: both; 
}

.wysiwyg {
  display: block;
}

.wysiwyg::after {
  content: "";
  display: table;
  clear: both;
}

/* Links */
.wysiwyg a { color: #2563eb; text-decoration: underline; text-underline-offset: 3px; }
@media (prefers-color-scheme: dark) {
  .wysiwyg a { color: #60a5fa; }
}

/* Lists */
.wysiwyg ul,
.wysiwyg ol {
  margin: 0.85em 0 0.85em 1.25em;
  padding-left: 1.25em;
}
.wysiwyg ul { list-style: disc outside; }
.wysiwyg ol { list-style: decimal outside; }
.wysiwyg li { margin: 0.35em 0; }
.wysiwyg li > ul,
.wysiwyg li > ol { margin-top: .35em; }

/* Blockquote */
.wysiwyg blockquote {
  margin: 1.2em 0;
  padding: .9em 1.1em;
  border-left: 3px solid color-mix(in oklab, currentColor 35%, transparent);
  background: color-mix(in oklab, currentColor 8%, transparent);
  border-radius: .6rem;
}

/* Images */
.wysiwyg img {
  max-width: 100%;
  height: auto;
  border-radius: .6rem;
  margin: 1.1em 0;
}

/* Tables */
.wysiwyg table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.1em 0 1.4em;
  font-size: 0.96rem;
  overflow: hidden;
  border-radius: .6rem;
}
.wysiwyg thead th {
  text-align: left;
  font-weight: 700;
  background: color-mix(in oklab, currentColor 12%, transparent);
}
.wysiwyg th,
.wysiwyg td {
  padding: .65em .8em;
  border: 1px solid color-mix(in oklab, currentColor 22%, transparent);
  vertical-align: top;
}
.wysiwyg tbody tr:nth-child(odd) {
  background: color-mix(in oklab, currentColor 6%, transparent);
}

/* Code (inline) */
.wysiwyg code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
    "Courier New", monospace;
  font-size: 0.95em;
  background: color-mix(in oklab, currentColor 16%, transparent);
  padding: .15em .35em;
  border-radius: .35rem;
}

/* Floated ad overlay — base (hidden) + hover/focus (show) */
.floatad {
  position: relative;           /* ensure the overlay’s absolute positioning is scoped */
}

.floatad__overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;                   /* HIDDEN BY DEFAULT ← this was missing */
  background-color: transparent;
  transition: opacity .15s ease, background-color .15s ease;
  pointer-events: none;         /* don't block clicks on the mailto link */
}

/* you already had these, keep them */
.floatad:hover .floatad__overlay,
.floatad:focus-visible .floatad__overlay,
.floatad:active .floatad__overlay {
  opacity: 1;
  background-color: rgba(0, 0, 0, 0.30);
}

/* Collapse floated ads on small screens */
@media (max-width: 768px) {
  .floatad { float: none !important; width: 100% !important; margin: 12px 0 !important; }
}

/* Keep the hr/rule aligned with a preceding floated ad */
.floatad + .wysiwyg { 
  clear: both; 
  margin-top: 40px;
 }

/* If you want the rule to stay flush and push content instead: */
/* .floatad + .wysiwyg { padding-top: 40px; } */

/* --- Article body image shrink (wins over other .wysiwyg rules) --- */
.wysiwyg :is(img, a > img, figure > img) {
  display: block !important;
  margin-left: auto !important;
  margin-right: auto !important;
  width: 50% !important;       /* 50% of the text column */
  max-width: 50% !important;
  height: auto !important;
  border-radius: 0.75rem !important;
}

/* Beat width/height attributes and inline width styles, too */
.wysiwyg :is(img[width], img[height], img[style*="width"]) {
  width: 50% !important;
  max-width: 50% !important;
  height: auto !important;
}

/* Mobile: go back to full width for readability */
@media (max-width: 768px) {
  .wysiwyg :is(img, a > img, figure > img),
  .wysiwyg :is(img[width], img[height], img[style*="width"]) {
    width: 100% !important;
    max-width: 100% !important;
  }
}

.adbay-rule {
  border: 0;
  height: 0;
  border-top: 1px solid color-mix(in oklab, currentColor 20%, transparent);
  margin: 1.75em 0;
  display: block;     /* full-width block */
}

/* Facebook comments polish (round + full width) */
.fb_iframe_widget,
.fb_iframe_widget > span,
.fb_iframe_widget iframe {
  width: 100% !important;
  border-radius: 1rem !important;
  overflow: hidden !important;
}
